<h1 id="wallet-class-usage">Wallet Class Usage</h1>
<p>Library to work with RecordsKeeper wallet class.</p>
<p>You can create wallet, dump wallet into a file, backup wallet into a file, import wallet from a file, lock wallet, unlock wallet, change wallet's password, retrieve private key, retrieve wallet's information, sign and verify message by using wallet class. You just have to pass parameters to invoke the pre-defined functions.</p>
<h2 id="node-authentication">Node Authentication</h2>
<p>Import config file.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">$config = include(&#39;config.php&#39;)</code></pre>
<p>Import values from config file.</p>
<ul>
<li>User name: The rpc user is used to call the APIs.</li>
<li>Password: The rpc password is used to authenticate the APIs.</li>
</ul>
<pre class="sourceCode PHP"><code class="sourceCode php">   $chain = $config[&#39;chain&#39;];
   $url = $config[&#39;url&#39;];
   $username = $config[&#39;rkuser&#39;];
   $pass = $config[&#39;passwd&#39;];
   $port = $config[&#39;port&#39;];</code></pre>
<p>Now we have node authentication credentials.</p>
<p>Wallet Class ------------</p>
<pre><code> class Wallet

  Wallet class is used to call wallet  related functions like create wallet, retrieve private key of wallet address, retrieve wallet&#39;s information, dump wallet, lock wallet, unlock wallet,  change wallet&#39;s password, create wallet&#39;s backup, import wallet&#39;s backup, sign message and verify message functions on RecordsKeeeper Blockchain. </code></pre>
<p><strong>1. Create wallet on RecordsKeeper blockchain</strong></p>
<p>createWallet() function is used to create wallet on RecordsKeeper blockchain</p>
<pre class="sourceCode PHP"><code class="sourceCode php">  createWallet()  

   $create = new wallet();
   $result = $create-&gt;createwallet();                 #createwallet() function call
   echo($result-&gt;public_address);                                               #prints public address of the wallet
   echo($result-&gt;private_key);      #prints private key of the wallet
   echo($result-&gt;public_key);    #prints public key of the wallet
    

It will return the public address, public key and private key.</code></pre>
<p><strong>2. Retrieve private key of an address</strong></p>
<p>You have to pass address argument to the getPrivateKey function call:</p>
<ul>
<li>Public Address: address whose private key is to be retrieved</li>
</ul>
<p>getPrivateKey() function is used to retrieve private key of the given address.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">  getPrivateKey($public_address)  

   $dumpkey = new wallet();
   $result = $dumpkey-&gt;getPrivateKey($public_address);             #getPrivateKey() function call
   echo($result);    #prints private key of the given address</code></pre>
<p>It will return private key of the given address.</p>
<p><strong>3. Retrieve node wallet's information</strong></p>
<p>retrieveWalletinfo() function is used to retrieve node wallet's information.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">  retrieveWalletinfo() 

   $wallinfo = new wallet();
   $result = $wallinfo-&gt;retrieveWalletinfo();      #retrieveWalletinfo() function call
   echo($result-&gt;balance);    #prints wallet&#39;s balance
   echo($result-&gt;tx_count);    #prints wallet transaction count
   echo($result-&gt;unspent_tx);   #prints unspent wallet transactions</code></pre>
<p>It will return wallet's balance, transaction count and unspent transactions.</p>
<p><strong>4. Create wallet's backup</strong></p>
<p>You have to pass these three arguments to the backupWallet function call:</p>
<ul>
<li>Filename: wallet's backup file name</li>
</ul>
<p>backupWallet() function is used to create backup of the wallet.dat file.</p>
<p>```PHP backupWallet(filename)</p>
<p><span class="math"><em>b</em><em>a</em><em>c</em><em>k</em><em>u</em><em>p</em> = <em>n</em><em>e</em><em>w</em><em>w</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(); </span>result = <span class="math">$backup-&gt;backupWallet(filename);      #backupWallet() function call    echo($</span>result); #prints result ```</p>
<p>It will return the response of the backup wallet function. The backup of the wallet is created in your chain's directory and you can simply access your file by using same filename that you have passed with the backupwallet function. Creates a backup of the wallet.dat file in which the node’s private keys and watch-only addresses are stored. The backup is created in file filename. Use with caution – any node with access to this file can perform any action restricted to this node’s addresses.</p>
<p><strong>5. Import backup wallet</strong></p>
<p>You have to pass these three arguments to the importWallet function call:</p>
<ul>
<li>Filename: wallet's backup file name</li>
</ul>
<p>importWallet() function is used to import wallet's backup file.</p>
<p>```PHP importWallet(filename)</p>
<p><span class="math"><em>i</em><em>m</em><em>p</em><em>o</em><em>r</em><em>t</em> = <em>n</em><em>e</em><em>w</em><em>w</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(); </span>result = <span class="math">$import-&gt;importWallet(filename);    #backupWallet() function call    echo($</span>result); #prints result ```<br />It will return the response of the import wallet function. It will import the entire set of private keys which were dumped (using dumpwallet) into file filename.</p>
<p><strong>6. Dump wallet on RecordsKeeper blockchain</strong></p>
<p>You have to pass these three arguments to the dumpWallet function call:</p>
<ul>
<li>Filename: file name to dump wallet in</li>
</ul>
<p>dumpWallet() function is used to retrieve transaction's information by passing transaction id to the function.</p>
<p>```PHP dumpWallet(filename)</p>
<p><span class="math"><em>D</em><em>w</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em> = <em>n</em><em>e</em><em>w</em><em>w</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(); </span>result = <span class="math">$Dwallet-&gt;dumpWallet(filename);    #dumpWallet() function call    echo($</span>result); #print result ```<br />It will return the response of the dump wallet function. Dumps the entire set of private keys in the wallet into a human-readable text format in file filename. Use with caution – any node with access to this file can perform any action restricted to this node’s addresses.</p>
<p><strong>7. Locking wallet with a password on RecordsKeeper Blockchain</strong></p>
<p>You have to pass password as an argument to the lockWallet function call:</p>
<ul>
<li>Password: password to lock the wallet</li>
</ul>
<p>lockWallet() function is used to verify transaction's information by passing transaction id and sender's address to the function.</p>
<p>```PHP lockWallet($password)</p>
<p><span class="math"><em>l</em><em>o</em><em>c</em><em>k</em> = <em>n</em><em>e</em><em>w</em><em>w</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(); </span>result = <span class="math"><em>l</em><em>o</em><em>c</em><em>k</em> −  &gt; <em>l</em><em>o</em><em>c</em><em>k</em><em>W</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(</span>password); #lockWallet() function call echo($result); #print result ```<br />It will return the the response of the lock wallet function. This encrypts the node’s wallet for the first time, using passphrase as the password for unlocking. Once encryption is complete, the wallet’s private keys can no longer be retrieved directly from the wallet.dat file on disk, and chain will stop and need to be restarted. Use with caution – once a wallet has been encrypted it cannot be permanently unencrypted, and must be unlocked for signing transactions with the unlockwallet function.</p>
<p><strong>8. Unlocking wallet with the password on RecordsKeeper Blockchain</strong></p>
<p>You have to pass these two arguments to the unlockWallet function call:</p>
<ul>
<li>Password: password to unlock the wallet</li>
<li>unlocktime: seconds for which wallet remains unlock</li>
</ul>
<p>unlockWallet() function is used to verify transaction's information by passing transaction id and sender's address to the function.</p>
<p>```PHP unlockWallet(<span class="math"><em>p</em><em>a</em><em>s</em><em>s</em><em>w</em><em>o</em><em>r</em><em>d</em>, </span>unlock_time)</p>
<p><span class="math"><em>u</em><em>n</em><em>l</em><em>o</em><em>c</em><em>k</em> = <em>n</em><em>e</em><em>w</em><em>w</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(); </span>result = <span class="math"><em>u</em><em>n</em><em>l</em><em>o</em><em>c</em><em>k</em> −  &gt; <em>u</em><em>n</em><em>l</em><em>o</em><em>c</em><em>k</em><em>W</em><em>a</em><em>l</em><em>l</em><em>e</em><em>t</em>(</span>password,<span class="math">$unlock_time);    #unlockWallet() function call    echo($</span>result); #print result ```<br />It will return the response of the unlock wallet function. This uses passphrase to unlock the node’s wallet for signing transactions for the next timeout seconds. This will also need to be called before the node can connect to other nodes or sign blocks that it has mined.</p>
<p><strong>9. Change wallet's password</strong></p>
<p>You have to pass these two arguments to the changeWalletPassword function call:</p>
<ul>
<li>Old Password: old password of the wallet</li>
<li>New Password: new password of the wallet</li>
</ul>
<p>changeWalletPassword() function is used to change wallet's password and set new password.</p>
<p>```PHP changeWalletPassword(<span class="math"><em>o</em><em>l</em><em>d</em><sub><em>p</em></sub><em>a</em><em>s</em><em>s</em><em>w</em><em>o</em><em>r</em><em>d</em>, </span>new_password)</p>
<pre><code>  $change = new wallet();
  $result = $change-&gt;changeWalletPassword($old_password,$new_password);        #changeWalletPassword() function call
  echo($result);    #print result</code></pre>
<p>```</p>
<p>This changes the wallet’s password from old-password to new-password.</p>
<p><strong>10. Sign Message on RecordsKeeper Blockchain</strong></p>
<p>You have to pass these two arguments to the signMessage function call:</p>
<ul>
<li>Message: message to send</li>
<li>Private Key: private key of the sender's wallet address</li>
</ul>
<p>signMessage() function is used to change wallet's password and set new password.</p>
<p>```PHP signMessage(<span class="math"><em>p</em><em>r</em><em>i</em><em>v</em><em>a</em><em>t</em><em>e</em><sub><em>k</em></sub><em>e</em><em>y</em>, </span>message)</p>
<pre><code>  $sign = new wallet();
  $result = $sign-&gt;signMessage($private_key,$message);      #signMessage() function call
  echo($result);    #print signed message</code></pre>
<p>```<br /> It will return the signed message.</p>
<p><strong>11. Verify Message on RecordsKeeper Blockchain</strong></p>
<p>You have to pass these three arguments to the verifyMessage function call:</p>
<ul>
<li>Message: message to send</li>
<li>Private Key: private key of the sender's wallet address</li>
</ul>
<p>verifyMessage() function is used to change wallet's password and set new password.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">   verifyMessage($address,$signedMessage, $message)
      $verify = new wallet();
      $result = $verify-&gt;verifyMessage($address,$signedMessage, $message)    #verifyMessage() function call
      echo($result);    #print validity of the message</code></pre>
<pre><code>  It will return the validity of the message.</code></pre>
