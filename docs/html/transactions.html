<h1 id="transactions-class-usage">Transactions Class Usage</h1>
<p>Library to work with RecordsKeeper streams.</p>
<p>You can publish, retrieve and verify stream data by using Stream class. You just have to pass parameters to invoke the pre-defined functions of Stream class.</p>
<h2 id="node-authentication">Node Authentication</h2>
<p>Import config file.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">$config = include(&#39;config.php&#39;)</code></pre>
<p>Import values from config file.</p>
<ul>
<li>User name: The rpc user is used to call the APIs.</li>
<li>Password: The rpc password is used to authenticate the APIs.</li>
</ul>
<pre class="sourceCode PHP"><code class="sourceCode php">   $chain = $config[&#39;chain&#39;];
   $url = $config[&#39;url&#39;];
   $username = $config[&#39;rkuser&#39;];
   $pass = $config[&#39;passwd&#39;];
   $port = $config[&#39;port&#39;];</code></pre>
<p>Now we have node authentication credentials.</p>
<h2 id="transaction-class">Transaction Class</h2>
<p>class Transaction</p>
<p>Transaction class is used to call transaction related functions like create raw transaction, sign transaction, send transaction , retrieve transaction and verify transaction functions which are used to create raw transactions, send transactions, sign transactions, retrieve transactions and verify transactions on the RecordsKeeeper Blockchain.</p>
<p><strong>1. Send Transaction without signing with private key</strong></p>
<p>You have to pass these three arguments to the sendTransaction function call:</p>
<ul>
<li>Transaction's sender address</li>
<li>Transaction's reciever address</li>
<li>Amount to be sent in transaction</li>
</ul>
<p>sendTransaction() function is used to send transaction by passing reciever's address, sender's address and amount.</p>
<pre class="sourceCode PHP"><code class="sourceCode php"> sendTransaction($sender_address,$reciever_address,$data,$amount)  


  $send = new Transaction();
  $result = $send-&gt;sendTransaction($sender_address,$reciever_address,$data,$amount);                  #sendTransaction() function call
  echo($result);                                               #prints transaction id of the sent transaction


It will return the transaction id of the raw transaction.</code></pre>
<p><strong>2. Send Transaction by signing with private key</strong></p>
<p>You have to pass these four arguments to the sendSignedTransaction function call:</p>
<ul>
<li>Transaction's sender address</li>
<li>Transaction's reciever address</li>
<li>Amount to be sent in transaction</li>
<li>Private key of the sender's address</li>
</ul>
<p>sendSignedTransaction() function is used to send transaction by passing reciever's address, sender's address, private key of sender and amount. In this function private key is required to sign transaction.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">  sendSignedTransaction($sender_address,$reciever_address,$amount,$private_key,$data)  

      $sendsigned = new Transaction();    
      $result = $sendsigned-&gt;sendSignedTransaction($sender_address,$reciever_address,$amount,$private_key,$data);      #sendSignedTransaction function call
  
      echo($result);      #prints transaction id of the signed transaction                           

  It will return transaction id of the signed transaction.</code></pre>
<p><strong>3. Create raw transaction</strong></p>
<p>You have to pass these three arguments to the createRawTransaction function call:</p>
<ul>
<li>Transaction's sender address</li>
<li>Transaction's reciever address</li>
<li>Amount to be sent in transaction</li>
</ul>
<p>createRawTransaction() function is used to create raw transaction by passing reciever's address, sender's address and amount.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">   createRawTransaction(sender_address, reciever_address, amount, data)  

      $tx_hex = new Transaction();
      $result = $tx_hex-&gt;createRawTransaction(sender_address, reciever_address, amount, data);   #createRawTransaction() function call
      echo($result);                                               #prints transaction hex of the raw transaction.
 
 It will return transaction hex of the raw transaction.</code></pre>
<p><strong>4.Sign raw transaction</strong></p>
<p>You have to pass these three arguments to the signRawTransaction function call:</p>
<ul>
<li>Transaction hex of the raw transaction</li>
<li>Private key to sign raw transaction</li>
</ul>
<p>signRawTransaction() function is used to sign raw transaction by passing transaction hex of the raw transaction and the private key to sign the raw transaction.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">   signRawTransaction($tx_hex,$private_key) 

      $sign = new Transaction();    
      $result = $sign-&gt;signRawTransaction($tx_hex,$private_key);  #signRawTransaction function call
      echo($result);      #prints signed transaction hex of the raw transaction
 

 It will return signed transaction hex of the raw transaction.</code></pre>
<p><strong>5. Send raw transaction</strong></p>
<p>You have to pass these three arguments to the sendRawTransaction function call:</p>
<ul>
<li>Signed transaction hex of the raw transaction</li>
</ul>
<p>sendRawTransaction() function is used to send raw transaction by passing signed transaction hex of the raw transaction.</p>
<pre class="sourceCode PHP"><code class="sourceCode php"> sendRawTransaction(signed_txHex) 

      $sendraw = new Transaction();    
      $result = $sendraw-&gt; sendRawTransaction(signed_txHex);    #sendRawTransaction() function call
  
  echo($result);    #prints transaction id of the raw transaction

  
It will return transaction id of the raw transaction sent on to the Blockchain.</code></pre>
<p><strong>6. Retrieve a transaction from the Blockchain</strong></p>
<p>You have to pass given argument to the retrieveTransaction function call:</p>
<ul>
<li>Transaction id of the transaction you want to retrieve</li>
</ul>
<p>retrieveTransaction() function is used to retrieve transaction's information by passing transaction id to the function.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">   retrieveTransaction($tx_id)

      $ret = new Transaction();    
      $result = $ret-&gt;retrieveTransaction($tx_id);
   #retrieveTransaction() function call
  echo($result-&gt;sent_data);     #print sent data
   echo($result-&gt;sent_amount);    #print sent amount
   

   It will return the sent data and sent amount of the retrieved transaction.</code></pre>
<p><strong>7. Calculate a particular transaction's fee on RecordsKeeper Blockchain</strong></p>
<p>You have to pass these two arguments to the getFee function call:</p>
<ul>
<li>Transaction id of the transaction you want to calculate fee for</li>
<li>Sender's address</li>
</ul>
<p>getFee() function is used to calculate transaction's fee by passing transaction id and sender's address to the function.</p>
<pre class="sourceCode PHP"><code class="sourceCode php">   getFee($address,$tx_id)

      $fee = new Transaction();    
      $result = $fee-&gt;getfee($address,$tx_id);
   #getfee() function call
  echo($result);   #prints fees consumed in the verified transaction
  
   

   It will return the fees consumed in the transaction.</code></pre>
